name: Configuration suite file for image operations on rbd client.
must_pass: true
parallel: false
tests:
  - runs_on: ceph-cluster1
    parallel: false
    config:
      - test:
          name: Running suite to bootstrap cluster.
          desc: configuration to bootstrap cluster.
          suite: misc/test_bootstrap_cluster.yaml
      - test:
          name: Deploy rbd node
          desc: Configuration to deploy rbd node in cluster
          module: workflow.py
          steps:
            - method: apply
              class: Orch
              component: ceph
              args:
                service_type: rbd
                service_name: rbd.1
                placement:
                  label: rbd
                  hosts:
                    - host1
                    - host2
          destroy-cluster: false
      - test:
          name: Creation of image.
          desc: configuration for the creation of block device image.
          module: workflow.py
          steps:
            - method: create
              class: Rbd
              component: rbd
      - test:
          name: Status of image.
          desc: configuration to retrieve state of the block device image operation.
          module: workflow.py
          steps:
            - method: status
              class: Rbd
              component: rbd
