name: Configuration suite file for two-way mirroring for rbd client.
must_pass: True
parallel: True
tests:
  - runs_on: ceph-rbd1
    parallel: False
    config:
      - test:
          name: cephadm-ansible preflight playbook
          desc: execute cephadm-preflight playbook
          module: test_cephadm_ansible.py
          config:
            playbook: cephadm-preflight.yaml
            extra-vars:
              ceph_origin: rhcs
            extra-args:
              limit: osds
      - test:
          abort-on-fail: true
          module: install_prereq.py
          name: install ceph pre-requisites
      - test:
          name: Running suite to bootstrap cluster.
          desc: configuration to bootstrap cluster.
          suite: misc/test_bootstrap_cluster.yaml
      - test:
          name: deploy rbd mirror daemon
          desc: Configuration to deploy rbd mirror daemon in cluster
          suite: rbd_twowaymirroring.yaml
  - runs_on: ceph-rbd2
    parallel: False
    config:
      - test:
          name: Running suite to bootstrap cluster.
          desc: configuration to bootstrap cluster.
          suite: misc/test_bootstrap_cluster.yaml
      - test:
          name: deploy rbd mirror daemon
          desc: Configuration to deploy rbd mirror daemon in cluster
          suite: rbd_twowaymirroring.yaml
